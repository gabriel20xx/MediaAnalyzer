<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MediaAnalyzer</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="header">
      <div class="container">
        <h1>MediaAnalyzer</h1>
        <div class="muted">Browse a folder and analyze media files.</div>

        <div class="tabs" style="margin-top: 12px;">
          <button id="tabDashboard" class="tabBtn active" type="button">Dashboard</button>
          <button id="tabSearch" class="tabBtn" type="button">Search</button>
          <button id="tabBrowser" class="tabBtn" type="button">Browser</button>
        </div>
      </div>
    </header>

    <div class="topStatus">
      <div class="container">
        <div id="progress" class="progress hidden"><div class="bar"></div></div>
        <div id="status" class="status"></div>
      </div>
    </div>

    <main class="container grid">
      <section class="panel full tabPanel active" data-tab="dashboard">
        <div class="row">
          <h2>Dashboard</h2>
          <div class="spacer"></div>
          <button id="btnAnalyzeAllGlobal" class="btn primary">Analyze all (all folders)</button>
          <div class="muted small">Updates from the database</div>
        </div>

        <div class="dashCards" id="dashCards">
          <div class="dashCard">
            <div class="dashTitle">Totals</div>
            <div class="dashKv" id="dashTotals"></div>
          </div>
          <div class="dashCard">
            <div class="dashTitle">Kinds</div>
            <div class="dashList" id="dashKind"></div>
          </div>
          <div class="dashCard">
            <div class="dashTitle">File formats</div>
            <div class="dashList" id="dashContainer"></div>
          </div>
          <div class="dashCard">
            <div class="dashTitle">Video codecs</div>
            <div class="dashList" id="dashVideoCodec"></div>
          </div>
          <div class="dashCard">
            <div class="dashTitle">Pixel formats</div>
            <div class="dashList" id="dashPixelFormat"></div>
          </div>
          <div class="dashCard">
            <div class="dashTitle">Frame rates</div>
            <div class="dashList" id="dashFrameRate"></div>
          </div>
          <div class="dashCard">
            <div class="dashTitle">Audio codecs</div>
            <div class="dashList" id="dashAudioCodec"></div>
          </div>
          <div class="dashCard">
            <div class="dashTitle">Audio sample rates</div>
            <div class="dashList" id="dashAudioSampleRate"></div>
          </div>
          <div class="dashCard">
            <div class="dashTitle">Audio channels</div>
            <div class="dashList" id="dashAudioChannels"></div>
          </div>
          <div class="dashCard">
            <div class="dashTitle">Resolutions</div>
            <div class="dashList" id="dashResolution"></div>
          </div>
        </div>
      </section>

      <section class="panel full tabPanel" data-tab="search">
        <div class="row">
          <h2>Search</h2>
          <div class="spacer"></div>
          <div class="row" style="gap: 8px;">
            <div class="muted small">Scope</div>
            <select id="searchScope" class="select" style="width: 200px;">
              <option value="all">All folders</option>
              <option value="current">Current folder</option>
            </select>
          </div>
          <button id="btnClearSearch" class="btn">Clear</button>
          <div id="searchSummary" class="muted small"></div>
        </div>

        <div class="muted small">Searches all files under <code>/media</code>. Metadata filters apply to analyzed files (stored in DB).</div>

        <div class="formGrid" style="margin-top: 10px;">
          <div class="field">
            <div class="fieldLabel">Kind</div>
            <select id="searchKind" class="select"></select>
          </div>
          <div class="field">
            <div class="fieldLabel">Container format</div>
            <select id="searchContainer" class="select"></select>
          </div>
          <div class="field">
            <div class="fieldLabel">Video codec</div>
            <select id="searchVideoCodec" class="select"></select>
          </div>
          <div class="field">
            <div class="fieldLabel">Audio codec</div>
            <select id="searchAudioCodec" class="select"></select>
          </div>
          <div class="field">
            <div class="fieldLabel">Resolution</div>
            <select id="searchResolution" class="select"></select>
          </div>
          <div class="field">
            <div class="fieldLabel">Name contains</div>
            <input id="searchName" class="input" type="text" placeholder="e.g. trailer" />
          </div>
        </div>

        <div class="label" style="margin-top: 10px;">Results</div>
        <div id="searchTable" class="table"></div>
      </section>

      <section class="panel full tabPanel" data-tab="browser">
        <div class="row">
          <h2>Browser</h2>
          <div class="spacer"></div>
          <button id="btnRefresh" class="btn">Refresh</button>
          <button id="btnToggleFileLayout" class="btn">Grid view</button>
          <button id="btnAnalyzeAll" class="btn primary">Analyze all (this folder)</button>
        </div>

        <div class="muted small">MEDIA_ROOT is mounted into the container (default: <code>/media</code>).</div>

        <div class="row gap">
          <button id="btnUp" class="btn">Up</button>
          <div class="path" id="currentPath">/</div>
        </div>

        <div class="columns">
          <div>
            <div class="label">Folders</div>
            <ul id="dirList" class="list"></ul>
          </div>
          <div>
            <div class="label">Files</div>
            <ul id="fileList" class="list"></ul>
          </div>
        </div>
      </section>
    </main>

    <script src="/app.js"></script>
  </body>
</html>
